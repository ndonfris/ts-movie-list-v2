{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import React,{useEffect,useState}from\"react\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import serverURL from\"../helpers/URL\";import SavedMovieList from\"../components/SavedMovieList\";import colors from\"../helpers/Colors\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SavedRoute=function SavedRoute(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),refreshing=_useState4[0],_setRefreshing=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),removing=_useState6[0],setRemoving=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loadIcon=_useState8[0],setLoadIcon=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),count=_useState10[0],setCount=_useState10[1];useEffect(function(){function retrieveMovies(){var res;return _regeneratorRuntime.async(function retrieveMovies$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(fetch(serverURL+\"/watch_list/get/less\"));case 2:res=_context.sent;_context.next=5;return _regeneratorRuntime.awrap(res.json().then(function(res){return setMovies(res);}).catch(function(err){return console.warn(err);}));case 5:case\"end\":return _context.stop();}}},null,null,null,Promise);}if(count==0){setLoadIcon(true);setCount(1);}else{setCount(count+1);setLoadIcon(false);}console.log(\"hit:\"+count);retrieveMovies();},[removing,refreshing]);return _jsxs(View,{style:styles.container,children:[_jsx(View,{style:styles.header,children:_jsx(Text,{style:styles.headerText,children:\"Watch List\"})}),_jsx(View,{style:styles.results,children:_jsx(SavedMovieList,{movieArray:movies,removing:removing,refreshing:refreshing,setRefreshing:function setRefreshing(){return _setRefreshing(!refreshing);},loadIcon:loadIcon})}),_jsx(TouchableOpacity,{style:styles.removeButton,onPress:function onPress(){setRemoving(!removing);_setRefreshing(!refreshing);},children:removing?_jsx(Text,{style:styles.buttonText,children:\"Finished Removing\"}):_jsx(Text,{style:styles.buttonText,children:\"Remove  Movie(s)?\"})})]});};var styles=StyleSheet.create({container:{flex:1,justifyContent:\"center\",backgroundColor:colors.black},header:{paddingTop:\"15%\",alignItems:\"center\",justifyContent:\"center\",backgroundColor:colors.black},headerText:{color:colors.dullWhite,fontSize:20,fontWeight:\"bold\"},results:{height:\"80%\",width:\"100%\",backgroundColor:colors.black,paddingTop:\"5%\",paddingBottom:\"5%\"},removeButton:{alignSelf:\"center\",width:\"60%\",height:\"5%\",borderRadius:20,backgroundColor:colors.barLighter,textAlign:\"center\",justifyContent:\"center\"},buttonText:{textAlign:\"center\",justifyContent:\"center\",color:colors.dullWhite}});export default SavedRoute;","map":{"version":3,"sources":["/home/ndonfris/Projects/ts-movie-list-frontend/frontend/routes/SavedRoute.tsx"],"names":["React","useEffect","useState","serverURL","SavedMovieList","colors","SavedRoute","movies","setMovies","refreshing","setRefreshing","removing","setRemoving","loadIcon","setLoadIcon","count","setCount","retrieveMovies","fetch","res","json","then","catch","err","console","warn","log","styles","container","header","headerText","results","removeButton","buttonText","StyleSheet","create","flex","justifyContent","backgroundColor","black","paddingTop","alignItems","color","dullWhite","fontSize","fontWeight","height","width","paddingBottom","alignSelf","borderRadius","barLighter","textAlign"],"mappings":"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","sourcesContent":["/**\n * File:        SavedRoute.tsx\n * Author:      Nick Donfris\n * Created:     01/24/22\n */\nimport React, { useEffect, useState } from \"react\";\nimport {Movie} from '../helpers/Interfaces';\nimport {StyleSheet, View, Text, TouchableOpacity} from \"react-native\";\nimport serverURL from \"../helpers/URL\";\nimport SavedMovieList from \"../components/SavedMovieList\";\nimport colors from \"../helpers/Colors\";\n\n/*\n * Creates the SavedRoute page. Calls mongoDB. The useEffect hook is called any time the refreshing\n * state is changed. This hook then asynchronously retrieves the movies from the backend\n *\n * @returns {JSX.Element} Saved Movies Page rendered by clicking the bottom navigation bar\n */\nconst SavedRoute = () => {\n    const [movies, setMovies] = useState<Movie[]>();\n\n    const [refreshing, setRefreshing] = useState(false);\n    const [removing, setRemoving] = useState(false);\n    const [loadIcon, setLoadIcon] = useState(true);\n    const [count, setCount] = useState(0);\n\n    useEffect(() => {\n        async function retrieveMovies(){ \n            const res = await fetch(serverURL + \"/watch_list/get/less\");\n            await res.json().then(res => setMovies(res)).catch(err => console.warn(err));\n        }\n        if (count == 0) {\n            setLoadIcon(true);\n            setCount(1);\n        } else {\n            setCount(count+1);\n            setLoadIcon(false);\n        }\n        console.log(\"hit:\" +count);\n        retrieveMovies();\n    }, [removing, refreshing]);\n\n    return (\n        <View style={styles.container}>\n            <View style={styles.header}>\n                <Text style={styles.headerText}>Watch List</Text>\n            </View>\n            <View style={styles.results}>\n                <SavedMovieList movieArray={movies} removing={removing} refreshing={refreshing} setRefreshing={() => setRefreshing(!refreshing)} loadIcon={loadIcon} />\n            </View> \n            <TouchableOpacity \n                style={styles.removeButton}\n                onPress={() => {\n                    setRemoving(!removing);\n                    setRefreshing(!refreshing);\n            }}>\n                {removing\n                    ? <Text style={styles.buttonText}>Finished Removing</Text>\n                    : <Text style={styles.buttonText}>Remove  Movie(s)?</Text>\n                }\n            </TouchableOpacity>\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        justifyContent: \"center\",\n        backgroundColor: colors.black\n    },\n    header: {\n        paddingTop: \"15%\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        backgroundColor: colors.black\n    },\n    headerText: {\n        color: colors.dullWhite,\n        fontSize: 20,\n        fontWeight: \"bold\",\n    },\n    results: {\n        height: \"80%\",\n        width: \"100%\",\n        backgroundColor: colors.black,\n        paddingTop: \"5%\",\n        paddingBottom: \"5%\",\n    },\n    removeButton: {\n        alignSelf: \"center\",\n        width: \"60%\",\n        height: \"5%\",\n        borderRadius: 20,\n        backgroundColor: colors.barLighter,\n        textAlign: \"center\",\n        justifyContent: \"center\",\n    },\n    buttonText: {\n        textAlign: \"center\",\n        justifyContent: \"center\",\n        color: colors.dullWhite,\n    }\n});\n\nexport default SavedRoute;\n"]},"metadata":{},"sourceType":"module"}