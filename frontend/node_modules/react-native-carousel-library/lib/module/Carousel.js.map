{"version":3,"sources":["Carousel.tsx"],"names":["Pagination","React","useCallback","useEffect","useRef","useState","View","Dimensions","Animated","StyleSheet","Text","isURL","width","get","ITEM_WIDTH","ITEM_HEIGHT","Carousel","data","landscapeImage","pagination","autoScroll","backgroundStyles","title","imageWrapperStyles","titleWrapperStyles","titleStyles","paginationStyles","autoScrollInterval","scrollRef","Value","current","active","setActive","viewabilityConfig","itemVisiblePercentThreshold","myRef","onViewableItemsChanged","viewableItems","length","index","viewabilityConfigCallbackPairs","timer","setInterval","scrollToIndex","animated","clearInterval","styles","wrapper","_","toString","event","nativeEvent","contentOffset","x","useNativeDriver","item","inputRange","translateX","interpolate","outputRange","isUrl","url","imageSource","uri","singleItem","titleContainer","horizontalImageContainer","imageContainer","horizontalImage","image","transform","create","minHeight","position","height","justifyContent","alignItems","overflow","borderRadius","resizeMode","zIndex","right","bottom","color","fontSize","paddingBottom","letterSpacing"],"mappings":"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","sourcesContent":["import Pagination from './components/Pagination';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport {\n  View,\n  Dimensions,\n  Animated,\n  ImageRequireSource,\n  StyleSheet,\n  Text,\n  ViewStyle,\n  TextStyle,\n  FlatList,\n} from 'react-native';\nimport isURL from 'validator/lib/isURL';\n\nconst { width } = Dimensions.get('screen');\nconst ITEM_WIDTH = width * 0.76;\nconst ITEM_HEIGHT = ITEM_WIDTH * 1.47;\ninterface props {\n  data: { url: string | ImageRequireSource; title?: string }[];\n  autoScroll: boolean;\n  autoScrollInterval?: number;\n  title?: boolean;\n  landscapeImage?: boolean;\n  backgroundStyles?: ViewStyle;\n  imageWrapperStyles?: ViewStyle;\n  pagination?: boolean;\n  titleWrapperStyles?: ViewStyle;\n  titleStyles?: TextStyle;\n  paginationStyles?: {\n    dotSize?: number;\n    indicatorColor?: string;\n    dotColor?: string;\n    top?: number;\n    bottom?: number;\n    left?: number;\n    right?: number;\n  };\n}\n\nconst Carousel: React.FC<props> = ({\n  data,\n  landscapeImage,\n  pagination = true,\n  autoScroll,\n  backgroundStyles,\n  title,\n  imageWrapperStyles,\n  titleWrapperStyles,\n  titleStyles,\n  paginationStyles,\n  autoScrollInterval = 5000,\n}) => {\n  const scrollRef = useRef(new Animated.Value(0)).current;\n  const [active, setActive] = useState<number>(0);\n  const viewabilityConfig = {\n    itemVisiblePercentThreshold: 50,\n  };\n  const myRef = useRef<FlatList>(null);\n\n  const onViewableItemsChanged = useCallback(({ viewableItems }) => {\n    if (viewableItems.length > 0) {\n      const { index } = viewableItems[0];\n      setActive(index);\n    }\n  }, []);\n\n  const viewabilityConfigCallbackPairs = useRef([\n    { viewabilityConfig, onViewableItemsChanged },\n  ]);\n\n  useEffect(() => {\n    let timer: NodeJS.Timer;\n    if (autoScroll) {\n      timer = setInterval(() => {\n        myRef.current?.scrollToIndex({\n          animated: active === data.length - 1 ? false : true,\n          index: active === data.length - 1 ? 0 : active + 1,\n        });\n      }, autoScrollInterval);\n    }\n    return () => clearInterval(timer);\n  }, [active, autoScroll, data.length, autoScrollInterval]);\n\n  return (\n    <View\n      style={[\n        styles.wrapper,\n        backgroundStyles,\n      ]}>\n      <Animated.FlatList\n        data={data}\n        ref={myRef}\n        keyExtractor={(_, index) => index.toString()}\n        horizontal\n        viewabilityConfigCallbackPairs={viewabilityConfigCallbackPairs.current}\n        showsHorizontalScrollIndicator={false}\n        pagingEnabled\n        decelerationRate=\"fast\"\n        initialNumToRender={2}\n        snapToInterval={width}\n        onScroll={Animated.event(\n          [{ nativeEvent: { contentOffset: { x: scrollRef } } }],\n          { useNativeDriver: true },\n        )}\n        renderItem={({ item, index }) => {\n          const inputRange = [\n            (index - 1) * width,\n            index * width,\n            (index + 1) * width,\n          ];\n          const translateX = scrollRef.interpolate({\n            inputRange,\n            outputRange: [-width * 0.7, 0, width * 0.7],\n          });\n          const isUrl = isURL(item.url + '');\n          const imageSource = isUrl ? { uri: item.url } : item.url;\n          return (\n            <View style={[styles.singleItem, imageWrapperStyles]}>\n              {title && <View style={[styles.titleContainer, titleWrapperStyles]}>\n                <Text key={index} style={[styles.title, titleStyles]}>\n                  {item.title}\n                </Text>\n              </View>}\n              <View style={[landscapeImage ? styles.horizontalImageContainer : styles.imageContainer]}>\n                <Animated.Image\n                  source={imageSource}\n                  style={[landscapeImage ? styles.horizontalImage : styles.image, { transform: [{ translateX }] }]}\n                />\n              </View>\n            </View>\n          );\n        }}\n      />\n      {pagination && (\n        <Pagination\n          scrollRef={scrollRef}\n          data={data}\n          paginationStyles={paginationStyles}\n        />\n      )}\n    </View>\n  );\n};\n\nexport default Carousel;\n\nconst styles = StyleSheet.create({\n  wrapper: {\n    width: '100%',\n    minHeight: ITEM_WIDTH,\n    position: 'relative',\n  },\n  singleItem: {\n    width: width,\n    height: ITEM_HEIGHT,\n    justifyContent: 'space-around',\n    alignItems: 'center',\n  },\n  imageContainer: {\n    width: ITEM_WIDTH,\n    height: ITEM_HEIGHT,\n    overflow: 'hidden',\n    alignItems: 'center',\n    borderRadius: 14,\n  },\n  horizontalImageContainer: {\n    width: ITEM_HEIGHT - 50,\n    height: ITEM_WIDTH,\n    overflow: 'hidden',\n    alignItems: 'center',\n    borderRadius: 14,\n  },\n  image: {\n    width: ITEM_WIDTH * 1.2,\n    height: ITEM_HEIGHT,\n    resizeMode: 'cover',\n  },\n  horizontalImage: {\n    width: ITEM_HEIGHT * 1.2,\n    height: ITEM_WIDTH,\n    resizeMode: 'cover',\n  },\n  titleContainer: {\n    zIndex: 3,\n    position: 'absolute',\n    right: 15,\n    bottom: -7,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  title: {\n    color: 'black',\n    fontSize: 21,\n    paddingBottom: 10,\n    letterSpacing: 2,\n  },\n});\n"]}