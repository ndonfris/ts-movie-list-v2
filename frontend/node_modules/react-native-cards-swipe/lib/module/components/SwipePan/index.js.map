{"version":3,"sources":["index.tsx"],"names":["React","Dimensions","PanGestureHandler","useAnimatedGestureHandler","withSpring","runOnJS","useSharedValue","SWIPE_DIRECTION","width","get","SwipePan","x","y","onSnap","onStart","onChangeDirection","onEnd","originY","children","directionX","DEFAULT","gestureHandler","event","ctx","startX","value","startY","onActive","translationX","translationY","direction","Math","round","RIGHT","LEFT","thresh","diff"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Dimensions } from 'react-native';\nimport { PanGestureHandler } from 'react-native-gesture-handler';\nimport {\n  useAnimatedGestureHandler,\n  withSpring,\n  runOnJS,\n  useSharedValue,\n} from 'react-native-reanimated';\n\nexport enum SWIPE_DIRECTION {\n  LEFT = 'left',\n  RIGHT = 'right',\n  DEFAULT = 'default',\n}\n\ninterface Value {\n  value: number;\n}\n\ninterface Props {\n  x: Value;\n  y: Value;\n  originY: Value;\n  onSnap: (swipedRight: boolean) => void;\n  onStart: () => void;\n  onEnd: () => void;\n  onChangeDirection: (direction: SWIPE_DIRECTION) => void;\n  children: React.ReactNode;\n}\n\ntype AnimatedGHContext = {\n  startX: number;\n  startY: number;\n};\n\nconst { width } = Dimensions.get('window');\n\nconst SwipePan = ({\n  x,\n  y,\n  onSnap,\n  onStart,\n  onChangeDirection,\n  onEnd,\n  originY,\n  children,\n}: Props) => {\n  const directionX = useSharedValue(SWIPE_DIRECTION.DEFAULT);\n  const gestureHandler = useAnimatedGestureHandler({\n    onStart: (event, ctx: AnimatedGHContext) => {\n      ctx.startX = x.value;\n      ctx.startY = y.value;\n\n      originY.value = event.y;\n      runOnJS(onStart)();\n    },\n    onActive: (event, ctx) => {\n      x.value = ctx.startX + event.translationX;\n      y.value = ctx.startY + event.translationY;\n      const direction =\n        Math.round(x.value) > 0 ? SWIPE_DIRECTION.RIGHT : SWIPE_DIRECTION.LEFT;\n      if (direction !== directionX.value) {\n        directionX.value = direction;\n        runOnJS(onChangeDirection)(direction);\n      }\n    },\n    onEnd: (event, ctx) => {\n      runOnJS(onEnd)();\n\n      const thresh = width * 0.4;\n      const diff = ctx.startX + event.translationX;\n      directionX.value = SWIPE_DIRECTION.DEFAULT;\n      runOnJS(onChangeDirection)(directionX.value);\n\n      if (diff > thresh) {\n        runOnJS(onSnap)(true);\n      } else if (diff < -1 * thresh) {\n        runOnJS(onSnap)(false);\n      } else {\n        x.value = withSpring(0);\n        y.value = withSpring(0);\n      }\n    },\n  });\n\n  return (\n    <PanGestureHandler onGestureEvent={gestureHandler}>\n      {children}\n    </PanGestureHandler>\n  );\n};\n\nexport default SwipePan;\n"]}